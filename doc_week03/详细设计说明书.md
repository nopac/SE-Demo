# 详细设计说明书
## 状态与版本信息
## 引言

#
## 一、程序的系统结构
### （一）单元设计说明
#### 1. 用户
##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
|浏览商品|响应时间：系统用户的网络，一般正常网络响应时间不超过1s。更新时间：秒级|前端网页地址|暂无|GoodsService|GoodsDao|前端存储：商品信息 后端存储：商品列表，人员列表
##### 注释设计：
 - 用户状态：未登录状态和已登录状态。

 - 首页展示：已登录状态下商品展示界面向用户展示的是基于推荐算法过滤后的商品，有利于用户的浏览体验。

 - 用户操作：未登录情况下只能浏览和查看商品属性，不能进行购买等其他操作。

 - 商品:对应属性下显示对应商品。
##### 测试条件：
 - 浏览的商城首页位置为\Home

 - 商城首页显示已有商品信息：包括商品图片和商品价格等

 - 首页上方的搜索栏目输入指定属性可以搜索到对应商品
##### 流程逻辑：
 - 例如用户进入商城首页，商城首页界面向用户展示的是数据库中已存在的商品。用户可以点击商品图片查看商品详细信息。
   
 - 未登录状态下用户不能将商品加入购物车或者进行购买。
   
 - 未登录状态下和已登录状态下都可以进行商品搜索操作。
##### 尚未解决的问题：
 - 未登录状态下向用户展示的是下单或者收藏量高的近期爆款商品
#
##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
|搜索商品|响应时间：系统用户的网络，一般正常网络响应时间不超过1s。更新时间：秒级|前端网页地址|暂无|GoodsService|GoodsDao|前端存储：商品信息 后端存储：商品列表，人员列表
##### 注释设计：
- 用户状态：未登录状态和已登录状态。

- 首页展示：已登录状态下商品展示界面向用户展示的是基于推荐算法过滤后的商品，有利于用户的浏览体验。

- 用户操作：未登录情况下只能浏览和查看商品属性，不能进行购买等其他操作，输入商品属性或者名称进行搜索。

- 商品:对应属性下显示对应商品。
##### 测试条件：
- 浏览的商城首页位置为\Home

- 商城首页显示已有商品信息：包括商品图片和商品价格等

- 首页上方的搜索栏目输入指定属性可以搜索到对应商品
##### 流程逻辑：
- 例如用户进入商城首页，商城首页界面向用户展示的是数据库中已存在的商品。用户可以点击商品图片查看商品详细信息。

- 未登录状态下用户不能将商品加入购物车或者进行购买。

- 未登录状态下和已登录状态下都可以进行商品搜索操作。
##### 尚未解决的问题：
- 可以在搜索功能里加入分类搜索，例如点击家电进入家电专区。



##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
|用户注册|响应时间：系统用户的网络，一般正常网络响应时间不超过1s。更新时间：秒级|输入指定格式的用户名,不得超过指定长度，不得使用非法字符|生成用户指定的id|UserController,UserService|UserDao|前端存储：用户注册信息，后端存储：用户表
##### 注释设计：
 - 该用户名是否已经被注册，已注册的用户名需重新选择

 - 用户名需符合指定格式，指定长度且不得使用非法字符

 - 密码需符合指定格式，指定长度且不得使用非法字符

 - 填写正确格式的验证码
##### 测试条件：
 - 注册的vue页面位置是/register

 - 用户用户名为未注册过的合法格式

 - 密码为符合格式没有非法字符的字符串

 - 验证码输入正确

  
##### 流程逻辑：
 - 用户进入商城首页，点击头像进行登录操作。然后进入登录界面点击注册进入注册页面，输入正确的用户名和密码，输入验证码进行注册
   
 - 此操作结束后会往后台数据库user表中插入一条用户信息。
   
 - 用户返回登录界面用注册的账户进行登录。
##### 尚未解决的问题：
 - 用户名可以重复，userid唯一也能注册成功

##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
|登录功能|响应时间：系统用户的网络，一般正常网络响应时间不超过1s。更新时间：秒级|用户名，密码|登录成功并进入商城首页|UserService|UserDao|前端：用户信息 后端：用户列表。商品列表
##### 注释设计：
 - 请输入合适的用户名
   
 - 请输入正确的密码
   
 - 请输入正确的验证码

##### 测试条件：
 - 登录的vue页面位置为\login。

 - 用户名为注册过的用户名。

 - 密码为该用户名所对应的正确的密码格式。

##### 流程逻辑：
 - 用户进入商城首页点击头像进行登录，进入登录页面输入注册过的账号密码进行登录，此时当后台数据库有当前的user用户信息，则就可以登录成功。
##### 尚未解决的问题：
 - 暂无


##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
||||||
##### 注释设计：
 -  1.
    2.
    3.
##### 测试条件：
 -  1.
    2.
    3.
##### 流程逻辑：
 -  1.
    2.
    3.
##### 尚未解决的问题：
 -  1.
    2.
    3.

##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
||||||
##### 注释设计：
-  1.
   2.
   3.
##### 测试条件：
-  1.
   2.
   3.
##### 流程逻辑：
-  1.
   2.
   3.
##### 尚未解决的问题：
-  1.
   2.
   3.




##


#### 2. 商家
##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
||||||
##### 注释设计：
##### 测试条件：
##### 流程逻辑：
##### 尚未解决的问题：

#
##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
||||||
##### 注释设计：
##### 测试条件：
##### 流程逻辑：
##### 尚未解决的问题：


#
#### 3. 管理员
##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
||||||
##### 注释设计：
##### 测试条件：
##### 流程逻辑：
##### 尚未解决的问题：

#
##### XXX程序描述：
|功能|性能|输入说明|输出说明|算法|接口|存储分配|
|:---|:---|:---|:---|:---|:---|:---|
||||||
##### 注释设计：
##### 测试条件：
##### 流程逻辑：
##### 尚未解决的问题：

#
### （二）数据库设计

#### 一. 外部设计
##### 1. 标准描述方式
###### 1) 标志符和状态

|  表名   | 名称  |  描述信息   | 状态  |
|  ----  | ----  |  ----  | ----  |
| 用户表  | User | 用户(普通用户和商户)信息  | 使用状态 |
| 商品表  | Goods | 商品信息  | 使用状态 | 
| 订单表  | Orders | 订单信息  | 使用状态 |
| 购物车表  | cart | 用户购物车信息  | 使用状态 |
| 评论表  | review | 用户商户双向评价打分  | 使用状态 |
| 金额记录表  | AmountRecord | 用户充值支出记录  | 使用状态 |       
| 管理员表  | Asministrators | 管理员账户信息  | 使用状态 |  
| 浏览记录表  | BrowseRecord | 用户浏览商品信息  | 未使用状态 |  

###### 2) 使用它的程序

|  应用程序   | 名称  |  版本号   |
|  ----  | ----  |  ----  |
| 注册登录与信息管理  | 一般用户模块 | 1.0  |
|  订单管理 | 一般用户模块 | 1.0  |
| 商品管理  | 商户模块 | 1.0  |
| 商家订单管理  | 商户模块 | 1.0  |
| 用户管理后台系统  | 管理员模块 | 1.0  |
| 商品和商家管理后台系统  | 管理员模块 | 1.0  |
| 审查后台系统  | 管理员模块 | 1.0  |

###### 3) 约定

* 1 用户表  (User) 

|  前缀   | 说明  |
|  ----  | ----  |
|Uid  | 商户id | 
|Uname  | 姓名 | 
|Upsw  | 密码 | 
|Phone  | 手机号 | 
|Email  | 邮箱 | 
|City  | 城市 | 
|Sex  | 性别 | 
|Bank  | 银行账号 | 
|Account  | 余额 | 
|Point  | 积分 | 
|Status  | 状态 | 
|License  | 营业执照 | 
|Identity  | 身份证 | 
|Grade  | 商家等级 | 
|Turnover  | 总交易额 | 
|LikeRate  | 满意度 | 
|MLikeRate  | 商家好评率 | 
|isMerchant  | 是否为商家 | 
|IdentityNumber  | 身份证号 | 
|Address  | 地址 | 

* 2 商品表 (Goods) 

|  前缀   | 说明  |
|  ----  | ----  |
|Gid  | 商品id | 
|Gname  | 商品名称 | 
|type  | 类别 | 
|Price  | 价格 | 
|Size  | 尺寸大小 | 
|Picture  | 照片 | 
|Introduction  | 使用说明 | 
|Bargain  | 是否允许议价 | 
|Storage  | 商品数量 | 
|GCondition  | 新旧程度 | 
|Mid  | 发布人 | 
|RNumber  | 评价数 | 
|Sale  | 销售量 | 
|likeRate  | 好评率 | 
|Status  | 状态 | 

* 3 订单表 (Orders)  

|  前缀   | 说明  |
|  ----  | ----  |
|Oid  | 订单id | 
|Uid  | 用户 | 
|Gid  | 商品 | 
|Mid  | 商家 | 
|Rid  | 评价 | 
|Subtime  |    提交时间  | 
|SubSucTime  | 成交时间 | 
|SentTime  |   发货时间  | 
|Price  | 单价 | 
|RetTime  | 退货时间 | 
|RetSecTime  | 退货成功时间 | 
|status  | 状态 | 
|Commission  | 手续费 | 
|Address  | 地址 | 
|Number  |  数量| 
|DeliverID  | 快递单号 | 
|sum  |   总金额| 
|Gname  | 商品名 | 
|MNote  | 商家备注 | 

* 4 购物车表 (cart) 

|  前缀   | 说明  |
|  ----  | ----  |
| Cid| 购物车id | 
| Uid| 用户 | 
| Gid| 商品 | 
| Number|个数 | 
| Price| 单价| 
| Gname| 名称| 

* 5 评论表 (review)

|  前缀   | 说明  |
|  ----  | ----  |
| Rid | 评价id | 
| star | 星级  | 
| Remark | 文字 | 
| Time | 评价时间 | 
| Fromid | 评价者 | 
| Toid | 被评价者 | 
| Rate | 被评价者满意度 | 
| type | 类型 | 
| oid | 订单 | 

* 6 金额记录表 (AmountRecord)

|  前缀   | 说明  |
|  ----  | ----  |
| Aid | 金额记录id | 
| Type |   类型 | 
| Amount | 金额 | 
| Atime |  时间 | 
| Oid |    订单 | 
| Uid |    用户  | 
| Account |余额   | 

* 7 管理员表 (Asministrators)

|  前缀   | 说明  |
|  ----  | ----  |
| AdmID | 管理员id | 
| password | 管理员密码 | 

* 8 浏览信息表 (BrowseRecord)

|  前缀   | 说明  |
|  ----  | ----  |
| Bid | 浏览信息表的id | 
| Uid | 用户id | 
| GoodsType | 商品类型 | 
| BrowseCount | 浏览次数 | 

###### 4) 专门指导
可参考的资料：
* 软件工程哈工大耿建玲视频
* 数据库设计规范

###### 5) 支持软件

1. 数据库设计编辑工具“navicat for mysql”
2. 数据库自带工具“mysql command line client”
3. 管理员工具：navicat for mysql

##### 2. 自由表述
暂无

#### 二. 结构设计

#### 三. 运行设计设计


